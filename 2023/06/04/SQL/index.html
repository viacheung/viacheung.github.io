<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"viacheung.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="11ã€é¢˜ç›®ï¼šç°åœ¨è¿è¥æƒ³è¦ç­›é€‰å‡ºæ‰€æœ‰åŒ—äº¬å¤§å­¦çš„å­¦ç”Ÿè¿›è¡Œç”¨æˆ·è°ƒç ”ï¼Œè¯·ä½ ä»ç”¨æˆ·ä¿¡æ¯è¡¨ä¸­å–å‡ºæ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œç»“æœè¿”å›è®¾å¤‡idå’Œå­¦æ ¡ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL">
<meta property="og:url" content="http://viacheung.github.io/2023/06/04/SQL/index.html">
<meta property="og:site_name" content="å‘½è¿çŸ³ä¹‹é—¨">
<meta property="og:description" content="11ã€é¢˜ç›®ï¼šç°åœ¨è¿è¥æƒ³è¦ç­›é€‰å‡ºæ‰€æœ‰åŒ—äº¬å¤§å­¦çš„å­¦ç”Ÿè¿›è¡Œç”¨æˆ·è°ƒç ”ï¼Œè¯·ä½ ä»ç”¨æˆ·ä¿¡æ¯è¡¨ä¸­å–å‡ºæ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œç»“æœè¿”å›è®¾å¤‡idå’Œå­¦æ ¡ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/viacheung/img/main/image/image-20230424160950126.png">
<meta property="og:image" content="https://raw.githubusercontent.com/viacheung/img/main/image/image-20230424161313268.png">
<meta property="og:image" content="https://raw.githubusercontent.com/viacheung/img/main/image/image-20230424162133044.png">
<meta property="og:image" content="https://raw.githubusercontent.com/viacheung/img/main/image/image-20230424163904655.png">
<meta property="article:published_time" content="2023-06-04T06:10:51.000Z">
<meta property="article:modified_time" content="2023-06-04T06:26:08.200Z">
<meta property="article:author" content="ViaCheung">
<meta property="article:tag" content="Java,python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/viacheung/img/main/image/image-20230424160950126.png">

<link rel="canonical" href="http://viacheung.github.io/2023/06/04/SQL/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>SQL | å‘½è¿çŸ³ä¹‹é—¨</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">å‘½è¿çŸ³ä¹‹é—¨</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ç©ºé—´ğŸ™‡</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://viacheung.github.io/2023/06/04/SQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="ViaCheung">
      <meta itemprop="description" content="el psy congroo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å‘½è¿çŸ³ä¹‹é—¨">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SQL
        </h1>

        <div class="post-meta">
	  <span class="post-time">

	  
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-06-04 14:10:51 / ä¿®æ”¹æ—¶é—´ï¼š14:26:08" itemprop="dateCreated datePublished" datetime="2023-06-04T14:10:51+08:00">2023-06-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SQL/" itemprop="url" rel="index"><span itemprop="name">SQL</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1"><a href="#1" class="headerlink" title="1"></a>1</h1><p>1ã€é¢˜ç›®ï¼šç°åœ¨è¿è¥æƒ³è¦ç­›é€‰å‡ºæ‰€æœ‰<strong>åŒ—äº¬å¤§å­¦</strong>çš„å­¦ç”Ÿè¿›è¡Œç”¨æˆ·è°ƒç ”ï¼Œè¯·ä½ ä»ç”¨æˆ·ä¿¡æ¯è¡¨ä¸­å–å‡ºæ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œç»“æœè¿”å›<strong>è®¾å¤‡id</strong>å’Œ<strong>å­¦æ ¡</strong>ã€‚<span id="more"></span></p>
<p>SELECT device_id,university FROM user_profile WHERE university&#x3D; â€˜åŒ—äº¬å¤§å­¦</p>
<p>æ³¨æ„ è¿”å›æ•°æ®ç”¨é€—å·éš”å¼€</p>
<h1 id="2"><a href="#2" class="headerlink" title="2"></a>2</h1><p>2ã€æŸ¥è¯¢è€ƒè¯•æˆç»©æœ‰ä¸åŠæ ¼çš„å­¦ç”Ÿçš„å­¦å·</p>
<p>SELECT DISTINCT å­¦å· FROM æˆç»©è¡¨ WHERE æˆç»©&lt; 60</p>
<p>DISTINCTç”¨æ¥å»é‡</p>
<h1 id="3"><a href="#3" class="headerlink" title="3"></a>3</h1><p>3ã€æŸ¥æ‰¾å¹´é¾„å¤§äº24å²çš„ç”¨æˆ·ä¿¡æ¯</p>
<p>SELECT device_id, gender, age, university FROM user_profile WHERE age is not null and age &gt; 24</p>
<p>null æ˜¯å¤§äºæ‰€æœ‰æ•°å€¼å‹è¿˜æ˜¯å°äºæ‰€æœ‰æ•°å€¼å‹æ˜¯ç”± DBMS å†³å®šçš„ï¼Œä¸¥è°¨èµ·è§ï¼Œè¿˜æ˜¯åŠ ä¸Š age is not null çš„æ¡ä»¶</p>
<h1 id="4"><a href="#4" class="headerlink" title="4"></a>4</h1><p>4ã€æŸ¥è¯¢æ‰€æœ‰ç³»å·åœ¨2å’Œ3ä¹‹é—´çš„ç­å·å’Œç­åã€‚</p>
<p>SELECT ç­å·,ç­å FROM ç­çº§è¡¨ WHERE ç³»å· BETWEEN <code>2` `AND </code>3</p>
<h1 id="5"><a href="#5" class="headerlink" title="5"></a>5</h1><p>5ã€æŸ¥è¯¢æ‰€æœ‰ç³»å·ä¸åœ¨2å’Œ3ä¹‹é—´çš„ç­å·å’Œç­åã€‚</p>
<p>SELECT ç­å·,ç­å FROM ç­çº§è¡¨ WHERE ç³»å· NOT BETWEEN <code>2` `AND </code>3</p>
<h1 id="6"><a href="#6" class="headerlink" title="6"></a>6</h1><p>6ã€ç°åœ¨è¿è¥æƒ³è¦æŸ¥çœ‹é™¤å¤æ—¦å¤§å­¦ä»¥å¤–çš„æ‰€æœ‰ç”¨æˆ·æ˜ç»†ï¼Œè¯·ä½ å–å‡ºç›¸åº”æ•°æ®</p>
<p>SELECT<code> </code>device_id,gender,age,university <code>FROM` `user_profile</code>WHERE<code> </code>university <code>NOT` `IN` `(</code>â€˜å¤æ—¦å¤§å­¦â€™&#96;&#96;)æˆ–è€…select device_id,gender,age,university from user_profile where university!&#x3D;â€å¤æ—¦å¤§å­¦â€</p>
<p>where å­—æ®µ inï¼ˆnot inï¼‰ ä¸€ä¸ªèŒƒå›´</p>
<h1 id="7"><a href="#7" class="headerlink" title="7"></a>7</h1><p>7ã€ç°åœ¨è¿è¥æƒ³è¦æ‰¾åˆ°<strong>ç”·æ€§ä¸”GPAåœ¨3.5ä»¥ä¸Š</strong>çš„ç”¨æˆ·è¿›è¡Œè°ƒç ”ï¼Œè¯·ä½ å–å‡ºç›¸å…³æ•°æ®ã€‚</p>
<p>select device_id,gender,age ,university,gpa from user_profile where gender&#x3D;â€maleâ€ and gpa&gt;3.5</p>
<h1 id="8"><a href="#8" class="headerlink" title="8"></a>8</h1><p>8ã€æŸ¥è¯¢æ‰€æœ‰ç³»å·å¤§äº1ä¸”ç­åä»¥â€œç”µå­ â€ å¼€å¤´çš„ç­å·å’Œç­åã€‚</p>
<p>SELECT<code> </code>ç­å·,ç­å <code>FROM` `ç­çº§è¡¨</code>WHERE<code> </code>ç³»å·&gt;1 <code>AND` `ç­å </code>LIKE<code> </code>â€˜ç”µå­%â€™</p>
<h1 id="9"><a href="#9" class="headerlink" title="9"></a>9</h1><p>9ã€ç°åœ¨è¿è¥æƒ³è¦æ‰¾åˆ°<strong>å­¦æ ¡ä¸ºåŒ—å¤§æˆ–GPAåœ¨3.7ä»¥ä¸Š</strong>çš„ç”¨æˆ·è¿›è¡Œè°ƒç ”ï¼Œè¯·ä½ å–å‡ºç›¸å…³æ•°æ®</p>
<p>SELECT<code> </code>device_id,gender,age,university,gpa <code>FROM` `user_profile</code>WHERE<code> </code>university&#x3D;&#96;&#96;â€™åŒ—äº¬å¤§å­¦â€™<code> </code>OR<code> </code>gpa &gt; 3.7</p>
<h1 id="10"><a href="#10" class="headerlink" title="10"></a>10</h1><p>10ã€ç°åœ¨è¿è¥æƒ³è¦æ‰¾åˆ°<strong>å­¦æ ¡ä¸ºåŒ—å¤§ã€å¤æ—¦å’Œå±±å¤§</strong>çš„åŒå­¦è¿›è¡Œè°ƒç ”ï¼Œè¯·ä½ å–å‡ºç›¸å…³æ•°æ®ã€‚</p>
<p>SELECT<code> </code>device_id,gender,age,university,gpa <code>FROM` `user_profile</code>WHERE<code> </code>university <code>IN` `(</code>â€˜åŒ—äº¬å¤§å­¦â€™<code> </code>, <code>&#39;å¤æ—¦å¤§å­¦&#39;</code>, <code>&#39;å±±ä¸œå¤§å­¦&#39;</code>)</p>
<h1 id="11"><a href="#11" class="headerlink" title="11"></a>11</h1><p>11ã€ç°åœ¨è¿è¥æƒ³è¦æ‰¾åˆ°gpaåœ¨3.5ä»¥ä¸Šçš„å±±ä¸œå¤§å­¦ç”¨æˆ· æˆ– gpaåœ¨3.8ä»¥ä¸Šçš„å¤æ—¦å¤§å­¦åŒå­¦è¿›è¡Œç”¨æˆ·è°ƒç ”ï¼Œè¯·ä½ å–å‡ºç›¸åº”æ•°æ®</p>
<p>SELECT<code> </code>device_id,gender,age,university,gpa <code>FROM` `user_profile</code>WHERE<code> </code>(university&#x3D;<code>&#39;å±±ä¸œå¤§å­¦&#39;</code>AND<code> </code>gpa &gt; 3.5) <code>OR` `(university=</code>â€˜å¤æ—¦å¤§å­¦â€™<code> </code>AND<code> </code>gpa &gt; 3.8)</p>
<h1 id="12"><a href="#12" class="headerlink" title="12"></a>12</h1><p>12ã€ç°åœ¨è¿è¥æƒ³æŸ¥çœ‹æ‰€æœ‰å¤§å­¦ä¸­å¸¦æœ‰åŒ—äº¬çš„ç”¨æˆ·çš„ä¿¡æ¯ï¼Œè¯·ä½ å–å‡ºç›¸åº”æ•°æ®ã€‚</p>
<p>SELECT device_id,age,university  FROM user_profile WHERE university  LIKE â€˜%åŒ—äº¬%â€™</p>
<p><strong>æ‹“å±•ï¼š</strong></p>
<p>è¿™é“é¢˜ä¸»è¦è€ƒå¯Ÿçš„æ˜¯æ¨¡ç³ŠæŸ¥è¯¢ å­—æ®µå like â€˜åŒ¹é…å†…å®¹â€™</p>
<ol>
<li>_ ï¼šä¸‹åˆ’çº¿ ä»£è¡¨åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼›</li>
<li>% ï¼šç™¾åˆ†å· ä»£è¡¨åŒ¹é…0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼›</li>
<li>[]: ä¸­æ‹¬å· ä»£è¡¨åŒ¹é…å…¶ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼›</li>
<li>[^]: ^å°–å†’å· ä»£è¡¨ éï¼Œå–åçš„æ„æ€ï¼›ä¸åŒ¹é…ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚</li>
</ol>
<p>tipsï¼šé¢è¯•å¸¸é—®çš„ä¸€ä¸ªé—®é¢˜ï¼šä½ äº†è§£å“ªäº›æ•°æ®åº“ä¼˜åŒ–æŠ€æœ¯ï¼Ÿ SQLè¯­å¥ä¼˜åŒ–ä¹Ÿå±äºæ•°æ®åº“ä¼˜åŒ–ä¸€éƒ¨åˆ†ï¼Œè€Œæˆ‘ä»¬çš„likeæ¨¡ç³ŠæŸ¥è¯¢ä¼šå¼•èµ·å…¨è¡¨æ‰«æï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œåº”è¯¥å°½é‡é¿å…ä½¿ç”¨likeå…³é”®å­—è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ã€‚</p>
<h1 id="13"><a href="#13" class="headerlink" title="13"></a>13</h1><p>13 å¤æ—¦å¤§å­¦å­¦ç”Ÿgpaæœ€é«˜å€¼</p>
<p>æ–¹æ³•ä¸€ï¼š</p>
<p><strong>descå€’æ’</strong></p>
<p>select gpa from user_profile where university &#x3D;â€™å¤æ—¦å¤§å­¦â€™ order by  gpa desc limit 1</p>
<p>æ–¹æ³•äºŒï¼š</p>
<p>èšåˆå‡½æ•°å¿…é¡»æ”¾åœ¨å‰é¢ ä¸å¯åœ¨whereé‡Œé¢</p>
<p>SELECT MAX(gpa)gpa FROM user_profile WHERE university &#x3D; â€˜å¤æ—¦å¤§å­¦â€™</p>
<p><strong>æ‹“å±•</strong></p>
<h2 id="ä½¿ç”¨èšåˆå‡½æ•°æ±‡æ€»æ•°æ®"><a href="#ä½¿ç”¨èšåˆå‡½æ•°æ±‡æ€»æ•°æ®" class="headerlink" title="ä½¿ç”¨èšåˆå‡½æ•°æ±‡æ€»æ•°æ®"></a>ä½¿ç”¨èšåˆå‡½æ•°æ±‡æ€»æ•°æ®</h2><p>SQLæä¾›çš„ç»Ÿè®¡å‡½æ•°æœ‰ï¼šCOUNT(ã€Shift+8ã€‘)ï¼šç»Ÿè®¡è¡¨ä¸­å…ƒç»„ä¸ªæ•°ï¼›COUNT([DISTINCT] &lt;åˆ—å&gt;)ï¼šç»Ÿè®¡æœ¬åˆ—åˆ—å€¼ä¸ªæ•°ï¼›SUM( &lt;åˆ—å&gt; )ï¼šè®¡ç®—åˆ—å€¼æ€»å’Œï¼›AVG( &lt;åˆ—å&gt; )ï¼šè®¡ç®—åˆ—å€¼å¹³å‡å€¼ï¼›MAX( &lt;åˆ—å&gt; )ï¼šæ±‚åˆ—å€¼æœ€å¤§å€¼ï¼›MIN( &lt;åˆ—å&gt; )ï¼š æ±‚åˆ—å€¼æœ€å°å€¼ã€‚ä¸Šè¿°å‡½æ•°ä¸­é™¤COUNT(ã€Shift+8ã€‘)å¤–ï¼Œå…¶ä»–å‡½æ•°åœ¨è®¡ç®—è¿‡ç¨‹ä¸­å‡å¿½ç•¥NULLå€¼ã€‚</p>
<p><strong>ç»Ÿè®¡å‡½æ•°ä¸èƒ½å‡ºç°åœ¨WHEREå­å¥ä¸­ã€‚</strong>ä¾‹å¦‚ï¼ŒæŸ¥è¯¢æˆç»©æœ€é«˜çš„å­¦ç”Ÿçš„å­¦å·ï¼Œå¦‚ä¸‹å†™æ³•æ˜¯é”™è¯¯çš„ï¼šSELECT å­¦å· FROM æˆç»©è¡¨WHERE æˆç»© &#x3D; MX(æˆç»©</p>
<h1 id="14"><a href="#14" class="headerlink" title="14"></a>14</h1><p>14ã€é¢˜ç›®ï¼šç°åœ¨è¿è¥æƒ³è¦çœ‹ä¸€ä¸‹ç”·æ€§ç”¨æˆ·æœ‰å¤šå°‘äººä»¥åŠä»–ä»¬çš„å¹³å‡gpaæ˜¯å¤šå°‘ï¼Œç”¨ä»¥è¾…åŠ©è®¾è®¡ç›¸å…³æ´»åŠ¨ï¼Œè¯·ä½ å–å‡ºç›¸åº”æ•°æ®ã€‚</p>
<p>é—®é¢˜åˆ†è§£ï¼š</p>
<ol>
<li>é™å®šæ¡ä»¶ä¸º ç”·æ€§ç”¨æˆ·ï¼›</li>
<li>æœ‰å¤šå°‘äººï¼Œæ˜æ˜¾æ˜¯è®¡æ•°ï¼Œcountå‡½æ•°ï¼›</li>
<li>å¹³å‡gpaï¼Œæ±‚å¹³å‡å€¼ç”¨avgå‡½æ•°ï¼›</li>
</ol>
<hr>
<p>ç»†èŠ‚é—®é¢˜ï¼šæ ¹æ®è¾“å‡ºç¤ºä¾‹ï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li>è¡¨å¤´é‡å‘½åï¼Œç”¨asè¯­æ³•</li>
<li>æµ®ç‚¹æ•°çš„å¹³å‡å€¼å¯èƒ½å°æ•°ç‚¹ä½æ•°å¾ˆå¤šï¼ŒæŒ‰ç…§ç¤ºä¾‹ä¿å­˜ä¸€ä½å°æ•°ï¼Œç”¨roundå‡½æ•°</li>
</ol>
<p>ä½¿ç”¨ROUND()å‡½æ•°ï¼ŒROUNDè¿”å›ä¸€ä¸ªæ•°å€¼ï¼Œèˆå…¥åˆ°æŒ‡å®šçš„é•¿åº¦æˆ–ç²¾åº¦</p>
<p>select count(gender) as male_num,round(avg(gpa),1) as avg_gpa from user_profile where gender&#x3D;â€™maleâ€™ </p>
<h1 id="15"><a href="#15" class="headerlink" title="15"></a>15</h1><p>15ã€ç°åœ¨è¿è¥æƒ³è¦å¯¹æ¯ä¸ªå­¦æ ¡ä¸åŒæ€§åˆ«çš„ç”¨æˆ·æ´»è·ƒæƒ…å†µå’Œå‘å¸–æ•°é‡è¿›è¡Œåˆ†æï¼Œè¯·åˆ†åˆ«è®¡ç®—å‡ºæ¯ä¸ªå­¦æ ¡æ¯ç§æ€§åˆ«çš„ç”¨æˆ·æ•°ã€30å¤©å†…å¹³å‡æ´»è·ƒå¤©æ•°å’Œå¹³å‡å‘å¸–æ•°é‡ã€‚</p>
<p>ç»“æœï¼šè¿™é‡Œæœ€å¥½ç”¨ä¸‹round(x,1)</p>
<p>select      gender, university,     count(device_id) as user_num,     avg(active_days_within_30) as avg_active_days,     avg(question_cnt) as avg_question_cnt from user_profile group by gender, university</p>
<p><strong>åœ¨é¢è¯•æŸä¸Šæµ·ä¸Šå¸‚é‡‘èç§‘æŠ€å…¬å¸ä¸­æ›¾è¢«é—®åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼š</strong></p>
<ol>
<li>ä½ åœ¨é¡¹ç›®ä¸­ä½ ç”¨è¿‡åˆ†ç»„å‡½æ•°å—ï¼Ÿ</li>
</ol>
<p>æˆ‘ï¼šç”¨è¿‡ï¼ˆå¿…é¡»å±•ç°å®åŠ›ï¼‰</p>
<ol>
<li>é‚£ä½ å¬æ¸…æ¥šæˆ‘ä¸‹é¢è¿™ä¸ªé—®é¢˜ï¼Œåˆ†ç»„SQLè¯­å¥ä¸­ï¼Œselectå’Œfromå’Œwhereå’Œgroup by å’Œ having è¿™å‡ éƒ¨åˆ†çš„æ‰§è¡Œé¡ºåºæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ</li>
</ol>
<p>æˆ‘ï¼šå…ˆæ˜¯fromï¼Œå†åˆ° where ï¼Œå†åˆ°selectï¼Œå†åˆ°group by ï¼Œæœ€åhavingã€‚</p>
<ol>
<li>ä½ èƒ½è¯´è¯´ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·å­çš„å—ï¼Ÿ</li>
</ol>
<p>æˆ‘ï¼šå› ä¸ºé¦–å…ˆè‚¯å®šæ˜¯è¦ç¡®å®šæ•°æ®ä»å“ªå¼ è¡¨æ¥ï¼Œç„¶åæŒ‰whereæ¡ä»¶æŸ¥è¯¢å‡ºç»“æœï¼Œå†ç„¶åæ‰èƒ½è¿›è¡Œgroup byåˆ†ç»„ï¼ˆåˆ†ç»„æ¡ä»¶å¯ä»¥æœ‰å¤šä¸ªï¼ŒæŒ‰å­—æ®µé¡ºåºä¾æ¬¡åˆ†ç»„ï¼‰ï¼Œæœ€åæ˜¯ç”±havingå¯¹åˆ†ç»„åçš„ç»“æœé›†è¿›è¡Œè¿‡æ»¤</p>
<p>æˆ‘çš„ç†è§£ï¼š å…ˆçœ‹ä»–æ˜¯æ ¹æ®ä»€ä¹ˆåˆ†ç»„çš„ ç„¶åçœ‹éœ€è¦å•¥å­—æ®µ ç»™ä»–å°±è¡Œäº†</p>
<h1 id="16"><a href="#16" class="headerlink" title="16"></a>16</h1><p>16ã€é¢˜ç›®ï¼šç°åœ¨è¿è¥æƒ³æŸ¥çœ‹æ¯ä¸ªå­¦æ ¡ç”¨æˆ·çš„å¹³å‡å‘è´´å’Œå›å¸–æƒ…å†µï¼Œå¯»æ‰¾ä½æ´»è·ƒåº¦å­¦æ ¡è¿›è¡Œé‡ç‚¹è¿è¥ï¼Œè¯·å–å‡ºå¹³å‡å‘è´´æ•°ä½äº5çš„å­¦æ ¡æˆ–å¹³å‡å›å¸–æ•°å°äº20çš„å­¦æ ¡ã€‚</p>
<p>select     university,     round(avg(question_cnt), 1) as avg_question_cnt,     round(avg(answer_cnt), 1) as avg_answer_cnt from user_profile group by university having avg_question_cnt&lt;5 or avg_answer_cnt&lt;20 </p>
<h2 id="ä½¿ç”¨HAVING"><a href="#ä½¿ç”¨HAVING" class="headerlink" title="ä½¿ç”¨HAVING"></a>ä½¿ç”¨HAVING</h2><p>HAVINGå­å¥ç”¨äºå¯¹åˆ†ç»„åçš„ç»“æœå†è¿›è¡Œè¿‡æ»¤ï¼Œå®ƒçš„åŠŸèƒ½æœ‰ç‚¹åƒWHEREå­å¥ï¼Œä½†å®ƒç”¨äºç»„è€Œä¸æ˜¯å•ä¸ªè®°å½•ã€‚<strong>åœ¨HAVINGå­å¥ä¸­å¯ä»¥ä½¿ç”¨ç»Ÿè®¡å‡½æ•°ï¼Œä½†åœ¨WHEREå­å¥ä¸­åˆ™ä¸èƒ½ã€‚****HAVINGé€šå¸¸ä¸GROUP BYå­å¥ä¸€èµ·ä½¿ç”¨ã€‚</strong></p>
<p>æˆ‘çš„ç†è§£ï¼š</p>
<h1 id="17"><a href="#17" class="headerlink" title="17"></a>17</h1><p>17ã€having æœ€åè§„å¾‹åˆ†ç»„çš„æ•°æ® å¯ä»¥ç”¨selectåé¢çš„as å­—æ®µ</p>
<p>é¢˜ç›®ï¼šç°åœ¨è¿è¥æƒ³è¦æŸ¥çœ‹ä¸åŒå¤§å­¦çš„ç”¨æˆ·å¹³å‡å‘å¸–æƒ…å†µï¼Œå¹¶æœŸæœ›ç»“æœæŒ‰ç…§å¹³å‡å‘å¸–æƒ…å†µè¿›è¡Œå‡åºæ’åˆ—ï¼Œè¯·ä½ å–å‡ºç›¸åº”æ•°æ®ã€‚</p>
<p>select university,     avg(question_cnt) as avg_question_cnt from user_profile group by university order by avg_question_cnt</p>
<p>åŒæ ·çš„ order by æ”¾åœ¨æœ€åé¢å°±å¥½äº†</p>
<ol>
<li>tipsï¼šåœ¨æ’åºä¸­order by å­—æ®µ asc â€“å…¶ä¸­å‡åºä¸ºasc(å¯ä»¥ä¸å†™ï¼Œé»˜è®¤å°±æ˜¯æŒ‰ç…§å‡åºæ’åˆ—),é™åºä¸ºdescï¼ˆå¿…é¡»å†™ï¼‰</li>
</ol>
<p>roundæœ€å¥½ä¹ŸåŠ ä¸€ä¸‹</p>
<h1 id="18"><a href="#18" class="headerlink" title="18"></a>18</h1><p>é¢˜ç›®ï¼šç°åœ¨è¿è¥æƒ³è¦æŸ¥çœ‹æ‰€æœ‰æ¥è‡ªæµ™æ±Ÿå¤§å­¦çš„ç”¨æˆ·é¢˜ç›®å›ç­”æ˜ç»†æƒ…å†µï¼Œè¯·ä½ å–å‡ºç›¸åº”æ•°æ®</p>
<ul>
<li>é™å®šæ¡ä»¶ï¼šæ¥è‡ªæµ™æ±Ÿå¤§å­¦çš„ç”¨æˆ·ï¼Œå­¦æ ¡ä¿¡æ¯åœ¨ç”¨æˆ·ç”»åƒè¡¨ï¼Œç­”é¢˜æƒ…å†µåœ¨ç”¨æˆ·ç»ƒä¹ æ˜ç»†è¡¨ï¼Œå› æ­¤éœ€è¦é€šè¿‡device_idå…³è”ä¸¤ä¸ªè¡¨çš„æ•°æ®ï¼› </li>
<li>æ–¹æ³•1ï¼šjoinä¸¤ä¸ªè¡¨ï¼Œç”¨inner joinï¼Œæ¡ä»¶æ˜¯on up.device_id&#x3D;qpd.device_id and up.university&#x3D;â€™æµ™æ±Ÿå¤§å­¦â€™</li>
<li>æ–¹æ³•2ï¼šå…ˆä»ç”»åƒè¡¨æ‰¾åˆ°æµ™æ±Ÿå¤§å­¦çš„æ‰€æœ‰å­¦ç”Ÿidåˆ—è¡¨where university&#x3D;â€™æµ™æ±Ÿå¤§å­¦â€™ï¼Œå†å»ç»ƒä¹ æ˜ç»†è¡¨ç­›é€‰å‡ºidåœ¨è¿™ä¸ªåˆ—è¡¨çš„è®°å½•ï¼Œç”¨where in</li>
</ul>
<p>select qpd.device_id, qpd.question_id, qpd.result from question_practice_detail as qpd inner join user_profile as up on up.device_id&#x3D;qpd.device_id and up.university&#x3D;â€™æµ™æ±Ÿå¤§å­¦â€™ order by question_idselect device_id, question_id, result from question_practice_detail where device_id in (     select device_id from user_profile     where university&#x3D;â€™æµ™æ±Ÿå¤§å­¦â€™ ) order by question_id</p>
<p>å­æŸ¥è¯¢æ•ˆç‡ä½ä¸€ç‚¹ ä½†æ˜¯æˆ‘å†™èµ·æ¥èˆ’æœ</p>
<p>xxè¡¨ inner join xxè¡¨ On æ¡ä»¶ order by XX</p>
<p>è¿˜æ˜¯ç”¨joinå§ !!!! ç”¨å­æŸ¥è¯¢å¥½åƒä¸å¤ªè¡Œ</p>
<p>è¿™é‡Œæ³¨æ„ï¼Œä¸€æ—¦æˆ‘ä»¬joinäº†ä¹‹åï¼Œselect qpd.device_id, qpd.question_id, qpd.resultåé¢è·Ÿçš„ä¸€å®šè¦æ˜¯å…·ä½“è¡¨çš„è¡¨å ä¸ç„¶æŸ¥ä¸å‡ºæ¥ï¼</p>
<p>è€Œä¸”ä¸­é—´æœ‰æ¡ä»¶çš„è¯åˆ«ç”¨where æ¡ä»¶ç›´æ¥åœ¨Oné‡Œé¢å†™å°±è¡Œ</p>
<h1 id="19"><a href="#19" class="headerlink" title="19"></a>19</h1><p>è¿è¥æƒ³è¦äº†è§£æ¯ä¸ªå­¦æ ¡ç­”è¿‡é¢˜çš„ç”¨æˆ·å¹³å‡ç­”é¢˜æ•°é‡æƒ…å†µï¼Œè¯·ä½ å–å‡ºæ•°æ®ã€‚</p>
<ul>
<li>æ¯ä¸ªå­¦æ ¡ï¼šæŒ‰å­¦æ ¡åˆ†ç»„ï¼Œgroup by university</li>
<li>å¹³å‡ç­”é¢˜æ•°é‡ï¼šåœ¨æ¯ä¸ªå­¦æ ¡çš„åˆ†ç»„å†…ï¼Œç”¨æ€»ç­”é¢˜æ•°é‡é™¤ä»¥æ€»äººæ•°å³å¯å¾—åˆ°å¹³å‡ç­”é¢˜æ•°é‡count(question_id) &#x2F; count(distinct device_id)</li>
<li>è¡¨è¿æ¥ï¼šå­¦æ ¡å’Œç­”é¢˜ä¿¡æ¯åœ¨ä¸åŒçš„è¡¨ï¼Œéœ€è¦åšè¿æ¥</li>
</ul>
<p>select university,     count(question_id) &#x2F; count(distinct qpd.device_id) as avg_answer_cnt from question_practice_detail as qpd inner join user_profile as up on qpd.device_id&#x3D;up.device_id group by university</p>
<h1 id="20"><a href="#20" class="headerlink" title="20"></a>20</h1><h3 id="å·¦è¿æ¥ï¼Œå³è¿æ¥ï¼Œå†…è¿æ¥ï¼Œå…¨è¿æ¥çš„åŒºåˆ«åŠä½¿ç”¨"><a href="#å·¦è¿æ¥ï¼Œå³è¿æ¥ï¼Œå†…è¿æ¥ï¼Œå…¨è¿æ¥çš„åŒºåˆ«åŠä½¿ç”¨" class="headerlink" title="å·¦è¿æ¥ï¼Œå³è¿æ¥ï¼Œå†…è¿æ¥ï¼Œå…¨è¿æ¥çš„åŒºåˆ«åŠä½¿ç”¨"></a>å·¦è¿æ¥ï¼Œå³è¿æ¥ï¼Œå†…è¿æ¥ï¼Œå…¨è¿æ¥çš„åŒºåˆ«åŠä½¿ç”¨</h3><p>å·¦è¿æ¥ ï¼ˆleft joinï¼‰ï¼šè¿”å›åŒ…æ‹¬å·¦è¡¨çš„æ‰€æœ‰è®°å½•å’Œå³è¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è®°å½•å³è¿æ¥ï¼ˆright joinï¼‰ï¼šè¿”å›åŒ…æ‹¬å³è¡¨çš„æ‰€æœ‰è®°å½•å’Œå·¦è¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è®°å½•ç­‰å€¼è¿æ¥æˆ–è€…å«å†…è¿æ¥ï¼ˆinner joinï¼‰ï¼šåªè¿”å›ä¸¤è¡¨ç›¸è¿ç›¸ç­‰çš„è¡Œå…¨å¤–è¿æ¥ï¼ˆfull joinï¼‰ï¼šè¿”å›å·¦å³è¡¨ä¸­æ‰€æœ‰çš„è®°å½•å’Œå·¦å³è¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è®°å½•ã€‚</p>
<ul>
<li>é™å®šæ¡ä»¶ï¼šæ— ï¼›</li>
<li>æ¯ä¸ªå­¦æ ¡ï¼šæŒ‰å­¦æ ¡åˆ†ç»„group by university</li>
<li>ä¸åŒéš¾åº¦ï¼šæŒ‰éš¾åº¦åˆ†ç»„group by difficult_level</li>
<li>å¹³å‡ç­”é¢˜æ•°ï¼šæ€»ç­”é¢˜æ•°é™¤ä»¥æ€»äººæ•°count(qpd.question_id) &#x2F; count(distinct qpd.device_id)</li>
<li>æ¥è‡ªä¸Šé¢ä¿¡æ¯ä¸‰ä¸ªè¡¨ï¼Œéœ€è¦è”è¡¨ï¼Œupä¸qpdç”¨device_idè¿æ¥ï¼Œqdä¸qpdç”¨question_idè¿æ¥ã€‚</li>
</ul>
<p>select      university,     difficult_level,     round(count(qpd.question_id) &#x2F; count(distinct qpd.device_id), 4) as avg_answer_cnt from question_practice_detail as qpd left join user_profile as up on up.device_id&#x3D;qpd.device_id left join question_detail as qd on qd.question_id&#x3D;qpd.question_id group by university, difficult_level</p>
<h1 id="21"><a href="#21" class="headerlink" title="21"></a>21</h1><p>è¿è¥æƒ³è¦æŸ¥çœ‹<strong>å‚åŠ äº†ç­”é¢˜</strong>çš„å±±ä¸œå¤§å­¦çš„ç”¨æˆ·åœ¨ä¸åŒéš¾åº¦ä¸‹çš„å¹³å‡ç­”é¢˜é¢˜ç›®æ•°ï¼Œè¯·å–å‡ºç›¸åº”æ•°æ®</p>
<p>ç›®å‰ç”¨inneræ¯”è¾ƒç¨³å¦¥</p>
<p>20é¢˜ç”¨innerå°±å¯</p>
<h1 id="22"><a href="#22" class="headerlink" title="22"></a>22</h1><p>åˆ†åˆ«æŸ¥çœ‹å­¦æ ¡ä¸ºå±±ä¸œå¤§å­¦æˆ–è€…æ€§åˆ«ä¸ºç”·æ€§çš„ç”¨æˆ·çš„device_idã€genderã€ageå’Œgpaæ•°æ®ï¼Œç»“æœä¸å»é‡</p>
<ul>
<li>é™å®šæ¡ä»¶ï¼šå­¦æ ¡ä¸ºå±±ä¸œå¤§å­¦æˆ–è€…æ€§åˆ«ä¸ºç”·æ€§çš„ç”¨æˆ·ï¼šuniversity&#x3D;â€™å±±ä¸œå¤§å­¦â€™, gender&#x3D;â€™maleâ€™ï¼›</li>
<li>åˆ†åˆ«æŸ¥çœ‹&amp;ç»“æœä¸å»é‡ï¼šæ‰€ä»¥ç›´æ¥ä½¿ç”¨ä¸¤ä¸ªæ¡ä»¶çš„oræ˜¯ä¸è¡Œçš„ï¼Œç›´æ¥ç”¨unionä¹Ÿä¸è¡Œï¼Œè¦ç”¨union allï¼Œåˆ†åˆ«å»æŸ¥æ»¡è¶³æ¡ä»¶1çš„å’Œæ»¡è¶³æ¡ä»¶2çš„ï¼Œç„¶ååˆåœ¨ä¸€èµ·ä¸å»é‡</li>
</ul>
<p>SELECT device_id,gender,age,gpa FROM user_profile WHERE university&#x3D;â€™å±±ä¸œå¤§å­¦â€™  UNION ALL SELECT device_id,gender,age,gpa FROM user_profile WHERE gender&#x3D;â€™maleâ€™</p>
<p>ç»“æœä¸å»é‡ å°±åŠ ALL</p>
<h1 id="23"><a href="#23" class="headerlink" title="23"></a>23</h1><p>é¢˜ç›®ï¼šç°åœ¨è¿è¥æƒ³è¦å°†ç”¨æˆ·åˆ’åˆ†ä¸º25å²ä»¥ä¸‹å’Œ25å²åŠä»¥ä¸Šä¸¤ä¸ªå¹´é¾„æ®µï¼Œåˆ†åˆ«æŸ¥çœ‹è¿™ä¸¤ä¸ªå¹´é¾„æ®µç”¨æˆ·æ•°é‡</p>
<p><strong>æœ¬é¢˜æ³¨æ„ï¼šageä¸ºnull ä¹Ÿè®°ä¸º 25å²ä»¥ä¸‹</strong></p>
<h3 id="CASEå‡½æ•°"><a href="#CASEå‡½æ•°" class="headerlink" title="CASEå‡½æ•°"></a>CASEå‡½æ•°</h3><p>æ˜¯ä¸€ç§å¤šåˆ†æ”¯çš„å‡½æ•°ï¼Œå¯ä»¥æ ¹æ®æ¡ä»¶åˆ—è¡¨çš„å€¼è¿”å›å¤šä¸ªå¯èƒ½çš„ç»“æœè¡¨è¾¾å¼ä¸­çš„ä¸€ä¸ªã€‚å¯ç”¨åœ¨ä»»ä½•å…è®¸ä½¿ç”¨è¡¨è¾¾å¼çš„åœ°æ–¹ï¼Œä½†ä¸èƒ½å•ç‹¬ä½œä¸ºä¸€ä¸ªè¯­å¥æ‰§è¡Œã€‚</p>
<p>case æ¡ä»¶è¡¨è¾¾å¼ when æ¡ä»¶è¡¨è¾¾å¼å€¼ then å­—æ®µå€¼ end as å­—æ®µ</p>
<p>SELECT CASE WHEN age &lt; 25 OR age IS NULL THEN â€˜25å²ä»¥ä¸‹â€™              WHEN age &gt;&#x3D; 25 THEN â€˜25å²åŠä»¥ä¸Šâ€™             END age_cut,COUNT(*) as number FROM user_profile GROUP BY age_cut</p>
<h1 id="24"><a href="#24" class="headerlink" title="24"></a>24</h1><p>é¢˜ç›®ï¼šç°åœ¨è¿è¥æƒ³è¦å°†ç”¨æˆ·åˆ’åˆ†ä¸º<strong>20å²ä»¥ä¸‹ï¼Œ20-24å²ï¼Œ25å²åŠä»¥ä¸Š</strong>ä¸‰ä¸ªå¹´é¾„æ®µï¼Œåˆ†åˆ«æŸ¥çœ‹ä¸åŒå¹´é¾„æ®µç”¨æˆ·çš„æ˜ç»†æƒ…å†µï¼Œè¯·å–å‡ºç›¸åº”æ•°æ®ã€‚ï¼ˆæ³¨ï¼šè‹¥<strong>å¹´é¾„ä¸ºç©º</strong>è¯·è¿”å›<strong>å…¶ä»–</strong>ã€‚ï¼‰</p>
<p>select     device_id,     gender,     case         when age&gt;&#x3D;25 then â€˜25å²åŠä»¥ä¸Šâ€™         when age&gt;&#x3D;20 then â€˜20-24å²â€™         when age&lt;20 then â€˜20å²ä»¥ä¸‹â€™         else â€˜å…¶ä»–â€™     end as age_cut from user_profile </p>
<h1 id="25"><a href="#25" class="headerlink" title="25"></a>25</h1><p>é¢˜ç›®ï¼šç°åœ¨è¿è¥æƒ³è¦è®¡ç®—å‡º<strong>2021å¹´8æœˆæ¯å¤©ç”¨æˆ·ç»ƒä¹ é¢˜ç›®çš„æ•°é‡</strong>ï¼Œè¯·å–å‡ºç›¸åº”æ•°æ®ã€‚</p>
<p><img src="https://raw.githubusercontent.com/viacheung/img/main/image/image-20230424160950126.png" alt="img"></p>
<p><strong>çŸ¥è¯†ç‚¹</strong>ï¼š</p>
<p>å¯¹äº2021-05-03ï¼Œç”¨year month dayå‡½æ•°ç›´æ¥å–å¾—æƒ³è¦çš„</p>
<pre><code class="plain">select
    day(date) as day,
    count(question_id) as question_cnt
from question_practice_detail
where month(date)=8 and year(date)=2021
group by date
</code></pre>
<h1 id="26"><a href="#26" class="headerlink" title="26"></a>26</h1><p>é¢˜ç›®ï¼šç°åœ¨è¿è¥æƒ³è¦æŸ¥çœ‹ç”¨æˆ·åœ¨æŸå¤©åˆ·é¢˜åç¬¬äºŒå¤©è¿˜ä¼šå†æ¥åˆ·é¢˜çš„å¹³å‡æ¦‚ç‡ã€‚è¯·ä½ å–å‡ºç›¸åº”æ•°æ®ã€‚<img src="https://raw.githubusercontent.com/viacheung/img/main/image/image-20230424161313268.png" alt="img"></p>
<ul>
<li><p>é™å®šæ¡ä»¶ï¼šç¬¬äºŒå¤©å†æ¥ã€‚</p>
</li>
<li><ul>
<li>è§£æ³•1ï¼šè¡¨é‡Œçš„æ•°æ®å¯ä»¥çœ‹ä½œæ˜¯å…¨éƒ¨ç¬¬ä¸€å¤©æ¥åˆ·é¢˜äº†çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ„é€ å‡ºç¬¬äºŒå¤©æ¥äº†çš„å­—æ®µï¼Œå› æ­¤å¯ä»¥è€ƒè™‘ç”¨left joinæŠŠç¬¬äºŒå¤©æ¥äº†çš„æ‹¼èµ·æ¥ï¼Œé™å®šç¬¬äºŒå¤©æ¥äº†çš„å¯ä»¥ç”¨date_add(date1, interval 1 day)&#x3D;date2ç­›é€‰ï¼Œå¹¶ç”¨device_idé™å®šæ˜¯åŒä¸€ä¸ªç”¨æˆ·ã€‚</li>
</ul>
</li>
<li><p>å¹³å‡æ¦‚ç‡ï¼š</p>
</li>
<li><ul>
<li>è§£æ³•1ï¼šå¯ä»¥count(date1)å¾—åˆ°å·¦è¡¨å…¨éƒ¨çš„dateè®°å½•æ•°ä½œä¸ºåˆ†æ¯ï¼Œcount(date2)å¾—åˆ°å³è¡¨å…³è”ä¸Šäº†çš„dateè®°å½•æ•°ä½œä¸ºåˆ†å­ï¼Œç›¸é™¤å³å¯å¾—åˆ°å¹³å‡æ¦‚ç‡</li>
</ul>
</li>
</ul>
<pre><code class="plain">select count(date2) / count(date1) as avg_ret
from (
    select
        distinct qpd.device_id,
        qpd.date as date1,
        uniq_id_date.date as date2
    from question_practice_detail as qpd
    left join(
        select distinct device_id, date
        from question_practice_detail
    ) as uniq_id_date
    on qpd.device_id=uniq_id_date.device_id
        and date_add(qpd.date, interval 1 day)=uniq_id_date.date
) as id_last_next_date
</code></pre>
<h1 id="27"><a href="#27" class="headerlink" title="27"></a>27</h1><p>é¢˜ç›®ï¼šç°åœ¨è¿è¥ä¸¾åŠäº†ä¸€åœºæ¯”èµ›ï¼Œæ”¶åˆ°äº†ä¸€äº›å‚èµ›ç”³è¯·ï¼Œè¡¨æ•°æ®è®°å½•å½¢å¼å¦‚ä¸‹æ‰€ç¤ºï¼Œç°åœ¨è¿è¥æƒ³è¦ç»Ÿè®¡æ¯ä¸ªæ€§åˆ«çš„ç”¨æˆ·åˆ†åˆ«æœ‰å¤šå°‘å‚èµ›è€…ï¼Œè¯·å–å‡ºç›¸åº”ç»“æœ</p>
<p><img src="https://raw.githubusercontent.com/viacheung/img/main/image/image-20230424162133044.png" alt="img"></p>
<p><strong>å­—ç¬¦ä¸²æˆªå–å‡½æ•°</strong></p>
<p>substring_index(FIELD, sep, n)å¯ä»¥å°†å­—æ®µFIELDæŒ‰ç…§sepåˆ†éš”ï¼š</p>
<p>(1).å½“nå¤§äº0æ—¶å–ç¬¬nä¸ªåˆ†éš”ç¬¦(nä»1å¼€å§‹)å·¦è¾¹çš„å…¨éƒ¨å†…å®¹ï¼›</p>
<p>(2).å½“nå°äº0æ—¶å–å€’æ•°ç¬¬nä¸ªåˆ†éš”ç¬¦(nä»-1å¼€å§‹)å³è¾¹çš„å…¨éƒ¨å†…å®¹ï¼›</p>
<pre><code class="plain">select
    substring_index(profile, &#39;,&#39;, -1) as gender,
    count(device_id) as number
from user_submit
group by gender
</code></pre>
<p>åŒç†ï¼Œå¯¹blog_urlè¿›è¡Œå¤„ç†</p>
<p>select device_id,substring_index(blog_url,â€™&#x2F;â€˜,-1) as user_name from user_submit;</p>
<p>å¦‚æœè¦æ‰¾å¹´é¾„å‘¢ï¼Ÿ</p>
<p>åŒå±‚åµŒå¥—</p>
<p>select substring_index(substring_index(profile,â€™,â€™,-2) ,â€™,â€™,1) as age,count(device_id) as number from user_submit group by age;</p>
<h1 id="28"><a href="#28" class="headerlink" title="28"></a>28</h1><p>ç°åœ¨è¿è¥æƒ³è¦æ‰¾åˆ°æ¯ä¸ªå­¦æ ¡gpaæœ€ä½çš„åŒå­¦æ¥åšè°ƒç ”ï¼Œè¯·ä½ å–å‡ºæ¯ä¸ªå­¦æ ¡çš„æœ€ä½gpaã€‚</p>
<p><img src="https://raw.githubusercontent.com/viacheung/img/main/image/image-20230424163904655.png" alt="img"></p>
<pre><code class="plain">select device_id,university,gpa
from user_profile
where (university,gpa) in (select university,min(gpa) from user_profile group by university)
order by university;
</code></pre>
<p>å­æŸ¥è¯¢ï¼šå»é‡çš„university ä»¥åŠmin gpa</p>
<p>ç„¶åç”¨Inåˆ¤æ–­ç¬¦åˆæ¡ä»¶çš„å°±è¡Œ</p>

    </div>

    
    
    
        <div class="reward-container">
  <div>â€œåšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œ!â€œ</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    æ‰“èµ
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.jpg" alt="ViaCheung å¾®ä¿¡æ”¯ä»˜">
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>ViaCheung
  </li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="http://viacheung.github.io/2023/06/04/SQL/" title="SQL">http://viacheung.github.io/2023/06/04/SQL/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/06/04/Redis/" rel="prev" title="Redis">
      <i class="fa fa-chevron-left"></i> Redis
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/06/04/%E5%B9%B6%E6%9F%A5%E9%9B%86/" rel="next" title="å¹¶æŸ¥é›†">
      å¹¶æŸ¥é›† <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1"><span class="nav-number">1.</span> <span class="nav-text">1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2"><span class="nav-number">2.</span> <span class="nav-text">2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3"><span class="nav-number">3.</span> <span class="nav-text">3</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4"><span class="nav-number">4.</span> <span class="nav-text">4</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5"><span class="nav-number">5.</span> <span class="nav-text">5</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6"><span class="nav-number">6.</span> <span class="nav-text">6</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7"><span class="nav-number">7.</span> <span class="nav-text">7</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8"><span class="nav-number">8.</span> <span class="nav-text">8</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9"><span class="nav-number">9.</span> <span class="nav-text">9</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10"><span class="nav-number">10.</span> <span class="nav-text">10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11"><span class="nav-number">11.</span> <span class="nav-text">11</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12"><span class="nav-number">12.</span> <span class="nav-text">12</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#13"><span class="nav-number">13.</span> <span class="nav-text">13</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE"><span class="nav-number">13.1.</span> <span class="nav-text">ä½¿ç”¨èšåˆå‡½æ•°æ±‡æ€»æ•°æ®</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#14"><span class="nav-number">14.</span> <span class="nav-text">14</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#15"><span class="nav-number">15.</span> <span class="nav-text">15</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#16"><span class="nav-number">16.</span> <span class="nav-text">16</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8HAVING"><span class="nav-number">16.1.</span> <span class="nav-text">ä½¿ç”¨HAVING</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#17"><span class="nav-number">17.</span> <span class="nav-text">17</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#18"><span class="nav-number">18.</span> <span class="nav-text">18</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#19"><span class="nav-number">19.</span> <span class="nav-text">19</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#20"><span class="nav-number">20.</span> <span class="nav-text">20</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A6%E8%BF%9E%E6%8E%A5%EF%BC%8C%E5%8F%B3%E8%BF%9E%E6%8E%A5%EF%BC%8C%E5%86%85%E8%BF%9E%E6%8E%A5%EF%BC%8C%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%8C%BA%E5%88%AB%E5%8F%8A%E4%BD%BF%E7%94%A8"><span class="nav-number">20.0.1.</span> <span class="nav-text">å·¦è¿æ¥ï¼Œå³è¿æ¥ï¼Œå†…è¿æ¥ï¼Œå…¨è¿æ¥çš„åŒºåˆ«åŠä½¿ç”¨</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#21"><span class="nav-number">21.</span> <span class="nav-text">21</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#22"><span class="nav-number">22.</span> <span class="nav-text">22</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#23"><span class="nav-number">23.</span> <span class="nav-text">23</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CASE%E5%87%BD%E6%95%B0"><span class="nav-number">23.0.1.</span> <span class="nav-text">CASEå‡½æ•°</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#24"><span class="nav-number">24.</span> <span class="nav-text">24</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#25"><span class="nav-number">25.</span> <span class="nav-text">25</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#26"><span class="nav-number">26.</span> <span class="nav-text">26</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#27"><span class="nav-number">27.</span> <span class="nav-text">27</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#28"><span class="nav-number">28.</span> <span class="nav-text">28</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ViaCheung"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">ViaCheung</p>
  <div class="site-description" itemprop="description">el psy congroo</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">40</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/viacheung" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;viacheung" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:viacheung5@gmail.com" title="E-Mail â†’ mailto:viacheung5@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ViaCheung</span>
</div>

<!--
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div> -->

<!-- ç½‘ç«™è¿è¡Œæ—¶é—´çš„è®¾ç½® -->
<span id="timeDate">è½½å…¥å¤©æ•°...</span>
<span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("03/01/2023 10:00:00"); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ "+dnum+" å¤© ";
        document.getElementById("times").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’.";
    }
setInterval("createtime()",250);
</script>
        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
